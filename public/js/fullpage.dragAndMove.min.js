/*!
 * fullpage.js Drag And Move Extension 0.0.4
 * https://github.com/alvarotrigo/fullPage.js
 *
 * This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(n){window.fp_dragAndMoveExtension=function(){function o(){M.isAnimating&&(i(),t(),m()),Q=window.requestAnimFrame(o)}function e(){"fingersonly"!==A.dragAndMove&&n(window).on("mousedown MouseDownHandler",d)}function t(){return an?(cn||(cn=Y),O=cn<Y?"up":cn>Y?"down":"none",cn=Y):(dn||(dn=L),O=dn<L?"left":dn>L?"right":"none",dn=L),O}function i(){a(),s();var o=an?Z:$;!M.isGrabbing&&o<0&&S.scrollHandler(),an?(K*=W,Z+=K,n(x).trigger("onScroll")):(N*=W,$+=N),M.isGrabbing||rn||r(o)}function r(n){var o=an?Z:$;Math.round(100*o)==Math.round(100*n)&&X++,X>2&&(M.isAnimating=!1)}function a(){var n,o;an?(n=S.getDestinationPosition(J),o=Z):J.length&&(n=J.position().left,o=$);var e=J.length?n*-1-o:0,t=e*U;l(t)}function l(n){an?K+=n:N+=n}function s(){if(M.isGrabbing){var n,o;an?(n=nn-Z,o=n-K):(n=on-$,o=n-N),l(o)}}function u(o){n(window).off("mousemove MouseMoveHandler",g),n(window).off("mouseup",u);var e=an?n(window).height():n(window).width(),t=O===_;if((ln<30||ln<e/2&&!t)&&(J=an?n(G):n(G).find(k)),!an&&J&&M.isGrabbing&&M.isAnimating){var i=R.find(z);i.length&&S.landscapeScroll(i,J,_)}if(n(x).trigger("onGrab",[!1]),M.isGrabbing=!1,rn=!1,cn=0,dn=0,!j)if(an){var r={up:n(G).prev().length?J.next():n(G),down:n(G).next().length?J.prev():n(G)};"none"!==_&&r[_].find(P).length&&S.silentLandscapeScroll(r[_].find(k),"internal")}else S.silentScroll(S.getDestinationPosition(n(G)))}function c(o){var e=o.originalEvent;if(X=0,rn=!0,I=(new Date).getTime(),S.isReallyTouch(e)){var t=S.getEventsPage(e);sn=t.y,un=t.x,en=M.getCurrentScroll(),tn=M.getCurrentScrollSlides(e);var i=S.getMSPointer();n(window).on("touchmove "+i.move,g),n(window).on("touchend",u)}}function d(o){j=X,X=0,rn=!0,I=(new Date).getTime(),sn=f(o,"y"),un=f(o,"x"),en=M.getCurrentScroll(),tn=M.getCurrentScrollSlides(o),g(o),n(window).on("mousemove MouseMoveHandler",g),n(window).on("mouseup",u)}function f(n,o){var e="x"===o;if(S.isTouch&&S.isReallyTouch(n)){var t=S.getEventsPage(n);return e?t.x:t.y}return e?n.pageX:A.scrollBar||!A.autoScrolling?n.screenY:n.pageY}function g(o){var e,t,i=o.originalEvent;t=f(i,"x"),e=f(i,"y");var r=e-sn,a=t-un;if(!(Math.abs(r)<5&&Math.abs(a)<5||Math.abs(r)<5&&Math.abs(r)>Math.abs(a)||Math.abs(a)<5&&Math.abs(a)>Math.abs(r))){rn&&(M.isGrabbing||(an=Math.abs(r)>Math.abs(a),S.removeAnimation(n(x)),S.removeAnimation(R.find(E))),n(x).trigger("onGrab",[!0]),M.isGrabbing=!0);var l={up:n(G).prev(),down:n(G).next(),left:n(i.target).closest(F).find(k).prev(),right:n(i.target).closest(F).find(k).next(),none:n(G)};M.isGrabbing&&(Z=M.getCurrentScroll(),$=M.getCurrentScrollSlides(i),L=t,Y=e,_=w(t,e),J=l[_],J=v(J,_),M.isAnimating="vertical"!==A.dragAndMove&&"horizontal"!==A.dragAndMove||"vertical"===A.dragAndMove&&an||"horizontal"===A.dragAndMove&&!an,M.isAnimating=M.isAnimating&&S.isScrollAllowed.m[_]),nn=en+r,on=tn+a,M.isAnimating&&i.preventDefault()}}function w(n,o){var e=an?sn:un,t=an?o:n;return ln=Math.abs(e-t),e>t?an?"down":"right":e<t?an?"up":"left":"none"}function v(o,e){return o.length?o:an?n(G):R.find(k)}function m(){var o=an?n(x):R.find(E);if(A.css3&&(!an||an&&A.autoScrolling&&!A.scrollBar)){var e=an?"translate3d(0px, "+Math.round(Z)+"px, 0px)":"translate3d("+Math.round($)+"px, 0px, 0px)";o.css(S.getTransforms(e))}else A.autoScrolling&&!A.scrollBar&&an?o.css("top",Math.round(Z)):an?n(window).scrollTop(Math.round(-Z)):o.closest(z).scrollLeft(-1*Math.round($))}function h(){var o=["continuousHorizontal","continuousVertical"];n.each(o,function(n,o){A[o]&&(A[o]=!1,p("error","The option `"+o+"` is not compatible with `dragAndDrop`; `"+o+"` desactivated."))}),A.scrollOverflow&&p("warn","The option `scrollOverflow` is not fully compatible with `dragAndDrop`; Scrolling sections/slides will not work when dragging")}function p(n,o){console&&console[n]&&console[n]("fullPage: "+o)}var M=this,b=n.fn.fullpage.getFullpageData(),A=b.options,S=b.internals,y="fullpage-wrapper",x="."+y,T="active",D="."+T,C="fp-section",F="."+C,G=F+D,H="fp-slide",P="."+H,k=P+D,q="fp-slides",z="."+q,B="fp-slidesContainer",E="."+B;M.isGrabbing=!1,M.isAnimating=!1;var O,R,I,L,Y,j,Q,V,X=0,_=null,J=null,K=0,N=0,U=.05,W=.7,Z=0,$=0,nn=0,on=0,en=0,tn=0,rn=!1,an=!1,ln=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){Q=window.setTimeout(n,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(n){window.clearTimeout(n)}}(),M.init=function(t){return V=V||n.extend(!0,{},A).dragAndMove,A.dragAndMove=V,A.fitToSection=!1,h(),e(),o(),M.turnOffTouch(),M},M.turnOffTouch=function(){if("mouseonly"!==A.dragAndMove){var o=S.getMSPointer();n(x).off("touchstart "+o.down).off("touchmove "+o.move),"mouseonly"!==A.dragAndMove&&n(x).on("touchstart "+o.down,c)}};var sn,un,cn=0,dn=0;M.getCurrentScroll=function(){if(!A.css3||!A.autoScrolling||A.scrollBar)return A.autoScrolling&&!A.scrollBar?parseInt(n(x).css("top")):-n(window).scrollTop();var o=n(x).css("transform");return o="undefined"==typeof o?n(x).css("-webkit-transform"):o,"undefined"!=typeof o?parseInt(o.split(",")[5]):void 0},M.getCurrentScrollSlides=function(o){var e=n(o.target).closest(F);R=e.length?e:R,"undefined"==typeof R&&(R=n(G));var t=R.find(z);if(t.length){var i=t.find(E);if(!A.css3)return-t.scrollLeft();var r=i.css("transform");if(r="undefined"==typeof r?n(x).css("-webkit-transform"):r,"undefined"!=typeof r)return"none"===r?0:parseInt(r.split(",")[4])}return 0},M.getDocumentHeight=function(){var o=0,e=n(F).length;return n(F).each(function(t){t!==e&&(o+=n(this).height())}),o},M.destroy=function(){var o=S.getMSPointer();n(x).off("touchstart "+o.down).off("touchmove "+o.move).off("touchend"),n(window).off("mousedown MouseDownHandler").off("mousemove MouseMoveHandler").off("mouseup"),cancelAnimFrame(Q),Q=void 0,A.dragAndMove=!1};var fn;M.isScrollingDown=function(){return!an&&fn?fn:fn="down"===_},M.c=S.c;var gn=M["common".charAt(0)];return"complete"===document.readyState&&gn("dragAndMove"),n(window).on("load",function(){gn("dragAndMove")}),M}}(jQuery);